sap.ui.define(["./BaseController","sap/ui/Device","sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/m/Popover","sap/m/Button","sap/m/library"],function(e,t,o,n,a,s,i){"use strict";var r=i.ButtonType,d=i.PlacementType;return e.extend("frontend.bbs.controller.BBSSAPAddOnDashboard",{_bExpanded:false,onInit:async function(){this.getView().addStyleClass(this.getOwnerComponent().getContentDensityClass());var e=jQuery.sap.storage(jQuery.sap.storage.Type.local);var o=e.get("jwt");var a=this.getOwnerComponent().getModel("navigationList");this.getView().setModel(a);this._setToggleButtonTooltip(!t.system.desktop);var s=this.getRouter().getHashChanger().getHash();var i=await this.getOwnerComponent().checkToken(o,s);var r=new n({userName:i.data.user.name});var i=this.getOwnerComponent().setModel(r,"userModel");this.getView().setModel(r,"view");t.media.attachHandler(this._handleWindowResize,this);this.getRouter().attachRouteMatched(this.onRouteChange.bind(this));this.getOwnerComponent().getModel("navigationList").setProperty("/selectedKey",s);this.getView().byId("_IDGenNavigationList1").getSelectedItem().oParent.setProperty("expanded",true)},onRouteChange:function(e){this.getOwnerComponent().getModel("navigationList").setProperty("/selectedKey",e.getParameter("name"));if(t.system.phone){this.onSideNavButtonPress()}},onParentItemSelect:function(e){var t=e.getSource();var o=this.getRouter();if(t.getItems().length==0){t.setHref("#/"+t.mProperties.key)}},handleUserNamePress:function(e){var t=new a({showHeader:false,placement:d.Bottom,content:[new s({text:"Logout",type:r.Transparent})]}).addStyleClass("sapMOTAPopover sapTntToolHeaderPopover");t.openBy(e.getSource())},onSideNavButtonPress:function(){var e=this.byId("toolPage");var t=e.getSideExpanded();this._setToggleButtonTooltip(t);e.setSideExpanded(!e.getSideExpanded())},_setToggleButtonTooltip:function(e){var t=this.byId("sideNavigationToggleButton");if(e){t.setTooltip("Large Size Navigation")}else{t.setTooltip("Small Size Navigation")}},_handleWindowResize:function(e){if(e.name==="Tablet"&&this._bExpanded||e.name==="Desktop"){this.onSideNavButtonPress();this._bExpanded=e.name==="Desktop"}}})});