sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/webc/main/Toast","sap/ui/core/routing/History"],function(e,t,o){"use strict";return e.extend("frontend.bbs.controller.Login",{onInit(){var e=jQuery.sap.storage(jQuery.sap.storage.Type.local);var t=e.get("jwt");this.getOwnerComponent().checkToken(t,"dashboard")},onLoginPressed(){var e=jQuery.sap.storage(jQuery.sap.storage.Type.local);let t=this.getView().byId("Company").getSelectedKey();e.put("company",t);let s=this.getView().byId("username").valueOf().getValue();let a=this.getView().byId("password").valueOf().getValue();let n=this.getView().byId("loginError");let r=this.getOwnerComponent().getRouter();var i,l;this.oHistory=o.getInstance();var l=e.get("prevHash");console.log(l);$.ajax({url:backendUrl+"login",type:"POST",data:JSON.stringify({email:s,password:a}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){e.put("jwt",t.jwt);if(l!==null){window.history.go(-1)}else{r.navTo("dashboard",{},true)}},statusCode:{401:function(e,t,o){n.show()},404:function(e,t,o){n.show()}}})}})});