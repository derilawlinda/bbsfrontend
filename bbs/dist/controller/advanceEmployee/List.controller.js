sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/core/routing/History","sap/ui/core/Fragment","sap/ui/layout/HorizontalLayout","sap/ui/layout/VerticalLayout","sap/m/Dialog","sap/m/Button","sap/m/Label","sap/m/library","sap/m/MessageToast","sap/m/Text","sap/m/TextArea","sap/ui/model/json/JSONModel"],function(e,t,o,n,a,i,r,s,l,u,c,d,m){"use strict";var p=l.ButtonType;var g=l.DialogType;return e.extend("frontend.bbs.controller.advanceEmployee.List",{onInit:function(){var e=new m(sap.ui.require.toUrl("frontend/bbs/model/employee_advance.json"));this.getOwnerComponent().setModel(e,"advanceEmployee");var t=new m(sap.ui.require.toUrl("frontend/bbs/model/budgeting.json"));this.getView().setModel(t,"budgeting")},onCreateButtonClick:function(e){if(!this.createEmployeeAdvanceDialog){this.createEmployeeAdvanceDialog=this.loadFragment({name:"frontend.bbs.view.advanceEmployee.CreateForm"})}this.createEmployeeAdvanceDialog.then(function(e){this.oDialog=e;this.oDialog.open();var t=new sap.ui.model.json.JSONModel;var o=[];t.setData(o);this.getView().setModel(t,"EmployeeAdvanceDetailModel");var n=new sap.ui.model.json.JSONModel;this.getView().setModel(n,"new_ea_items");this.getView().getModel("new_ea_items").setProperty("/itemRow",[])}.bind(this))},getRouter:function(){return sap.ui.core.UIComponent.getRouterFor(this)},onNavBack:function(e){var o,n;o=t.getInstance();n=o.getPreviousHash();if(n!==undefined){window.history.go(-1)}else{this.getRouter().navTo("login",{},true)}},_closeDialog:function(){this.oDialog.close()},buttonFormatter:function(e){if(e=="Approved"){return"Accept"}else if(e=="Pending"){return"Attention"}else{return"Reject"}},dateFormatter:function(e){var t=sap.ui.core.format.DateFormat.getDateInstance({pattern:"YYYY/MM/DD"});var o=t.format(e);return o},onPress:function(e){var t=this.getOwnerComponent().getRouter();var o=e.getSource().getBindingContextPath();var n=o.split("/").slice(-1).pop();t.navTo("advanceEmployeeDetail",{ID:n})},onAddPress:function(e){const t=this.getView().getModel("new_ea_items");var o=t.getData();var n={account_code:"",item_name:"",amount:""};o.itemRow.push(n);console.log(o.itemRow);var a=new sap.ui.model.json.JSONModel(o);this.getView().setModel(a,"new_ea_items");a.refresh()}})});