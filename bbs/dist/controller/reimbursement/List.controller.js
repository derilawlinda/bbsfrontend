sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/core/routing/History","sap/ui/core/Fragment","sap/ui/layout/HorizontalLayout","sap/ui/layout/VerticalLayout","sap/m/Dialog","sap/m/Button","sap/m/Label","sap/m/library","sap/m/MessageToast","sap/m/Text","sap/m/TextArea","sap/m/Input","sap/ui/model/json/JSONModel","sap/ui/core/Core"],function(e,t,o,n,s,i,r,a,u,c,l,g,d,m,p){"use strict";var h;var f;var b=[];return e.extend("frontend.bbs.controller.reimbursement.List",{onInit:async function(){var e=new m(sap.ui.require.toUrl("frontend/bbs/model/reimbursements.json"));this.getView().setModel(e,"reimbursement");var t=new m(sap.ui.require.toUrl("frontend/bbs/model/budgeting_accounts.json"));this.getView().setModel(t,"budgeting_accounts");var o=new m(sap.ui.require.toUrl("frontend/bbs/model/accounts.json"));this.getView().setModel(o,"accounts")},search:function(e,t){if(t!=h){b=[]}if(!Array.isArray(e))return b;var o=this;e.forEach(function(e){if(e.subheader===t){const o=e.nodes&&Array.isArray(e.nodes)?e.nodes.filter(e=>e.value===t):[];b.push(e)}else{o.search(e.nodes,t)}h=t});return b},onCreateButtonClick:function(e){if(!this.createBudgetingDialog){this.createBudgetingDialog=this.loadFragment({name:"frontend.bbs.view.reimbursement.CreateForm"})}this.createBudgetingDialog.then(function(e){this.oDialog=e;this.oDialog.open();var t=new sap.ui.model.json.JSONModel;var o=[];t.setData(o);this.getView().setModel(t,"budgetingDetailModel");var n=new sap.ui.model.json.JSONModel;this.getView().setModel(n,"new_budgeting_accounts");this.getView().getModel("new_budgeting_accounts").setProperty("/accountRow",[])}.bind(this))},onSaveButtonClick:function(e){console.log(e)},getRouter:function(){return sap.ui.core.UIComponent.getRouterFor(this)},_closeDialog:function(){this.oDialog.close()},buttonFormatter:function(e){if(e=="Approved"){return"Accept"}else if(e=="Pending"){return"Attention"}else{return"Reject"}},onNavBack:function(e){var o,n;o=t.getInstance();n=o.getPreviousHash();if(n!==undefined){window.history.go(-1)}else{this.getRouter().navTo("login",{},true)}},onPress:function(e){var t=this.getOwnerComponent().getRouter();var o=e.getSource().getBindingContextPath();var n=o.split("/").slice(-1).pop();t.navTo("reimbursementDetail",{ID:n})},onAddPress:function(e){const t=this.getView().getModel("new_budgeting_accounts");const o=console.log(this.getView().getModel("accounts"));var n=t.getData();var s={account_code:"",account_name:"",amount:""};n.accountRow.push(s);var i=new sap.ui.model.json.JSONModel(n);this.getView().setModel(i,"new_budgeting_accounts");i.refresh()},onSelectionChange:function(e){console.log(e.getParameters("selected"))}})});