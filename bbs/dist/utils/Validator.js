sap.ui.define(["sap/ui/core/message/Message","sap/ui/core/MessageType","sap/ui/core/ValueState"],function(e,t,a){"use strict";var r=function(){this._isValid=true;this._isValidationPerformed=false;this._aPossibleAggregations=["items","content","form","formContainers","formElements","fields","sections","subSections","_grid","cells","_page"];this._aValidateProperties=["value","selectedKey","text"]};r.prototype.isValid=function(){return this._isValidationPerformed&&this._isValid};r.prototype.validate=function(e){this._isValid=true;sap.ui.getCore().getMessageManager().removeAllMessages();this._validate(e);return this.isValid()};r.prototype.clearValueState=function(e){if(!e)return;if(e.setValueState)e.setValueState(a.None);this._recursiveCall(e,this.clearValueState)};r.prototype._validate=function(e){var t,r=true,i=true;if(!((e instanceof sap.ui.core.Control||e instanceof sap.ui.layout.form.FormContainer||e instanceof sap.ui.layout.form.FormElement||e instanceof sap.m.IconTabFilter)&&e.getVisible())){return}if(e.getRequired&&e.getRequired()===true&&e.getEnabled&&e.getEnabled()===true){i=this._validateRequired(e)}else if((t=this._hasType(e))!==-1&&e.getEnabled&&e.getEnabled()===true){i=this._validateConstraint(e,t)}else if(e.getValueState&&e.getValueState()===a.Error){i=false;this._setValueState(e,a.Error,"Wrong input")}else{r=false}if(!i){this._isValid=false}if(!r){this._recursiveCall(e,this._validate)}this._isValidationPerformed=true};r.prototype._validateRequired=function(e){var t=true;for(var r=0;r<this._aValidateProperties.length;r+=1){try{e.getBinding(this._aValidateProperties[r]);var i=e.getProperty(this._aValidateProperties[r]);console.log(e.getBinding());if(!i||i===""||Number(i)===0){this._setValueState(e,a.Error,"Field required!");t=false}else if(e.getAggregation("picker")&&e.getProperty("selectedKey").length===0){this._setValueState(e,a.Error,"Please choose an entry!");t=false}else{e.setValueState(a.None);t=true;break}}catch(e){}}return t};r.prototype._validateConstraint=function(e,t){var r=true;try{var i=e.getProperty("editable")}catch(e){i=true}if(i){try{var s=e.getBinding(this._aValidateProperties[t]);var o=e.getProperty(this._aValidateProperties[t]);var n=s.getType().parseValue(o,s.sInternalType);s.getType().validateValue(n);e.setValueState(a.None)}catch(t){r=false;this._setValueState(e,a.Error,t.message)}}return r};r.prototype._addMessage=function(r,i){var s,o=t.Error;if(i===undefined)i="Wrong input";console.log(r.getMetadata().getName());switch(r.getMetadata().getName()){case"sap.m.CheckBox":case"sap.m.Input":this._setValueState(r,a.Error,"Wrong input");case"sap.m.Select":s=r.getParent().getLabel().getText();break}if(r.getValueState)o=this._convertValueStateToMessageType(r.getValueState());sap.ui.getCore().getMessageManager().addMessages(new e({message:r.getValueStateText?r.getValueStateText():i,type:o,additionalText:s}))};r.prototype._hasType=function(e){for(var t=0;t<this._aValidateProperties.length;t+=1){if(e.getBinding(this._aValidateProperties[t])&&e.getBinding(this._aValidateProperties[t]).getType())return t}return-1};r.prototype._setValueState=function(e,t,a){e.setValueState(t);if(e.getValueStateText&&!e.getValueStateText())e.setValueStateText(a)};r.prototype._recursiveCall=function(e,t){for(var a=0;a<this._aPossibleAggregations.length;a+=1){var r=e.getAggregation(this._aPossibleAggregations[a]);if(!r)continue;if(r instanceof Array){for(var i=0;i<r.length;i+=1){t.call(this,r[i])}}else{t.call(this,r)}}};r.prototype._convertValueStateToMessageType=function(e){var r;switch(e){case a.Error:r=t.Error;break;case a.Information:r=t.Information;break;case a.None:r=t.None;break;case a.Success:r=t.Success;break;case a.Warning:r=t.Warning;break;default:r=t.Error}return r};return r});