<mvc:View xmlns:cards="sap.f.cards" 
controllerName="frontend.bbs.controller.advanceRealization.Detail"
xmlns:mvc="sap.ui.core.mvc"
xmlns="sap.m"
xmlns:f="sap.f"
xmlns:form="sap.ui.layout.form"
xmlns:table="sap.ui.table"
xmlns:core="sap.ui.core"
>

<Page  id="advanceRequestPageId" showNavButton="true"
		navButtonPress=".onNavBack"
		showFooter="{viewModel>showFooter}">
    
    <content>
      <VBox class="sapUiSmallMargin" id="createARForm" justifyContent="Start">

                <FlexBox >
                <table:Table id="advanceReqLineTableID" 
                        rows="{advanceRequestDetailModel>/ADVANCEREQLINESCollection}"
						visibleRowCount="5"
                        class="topMargin"
						 
				>

				<table:extension>
					<OverflowToolbar  class="sapMTBHeader-CTX">
						<Title text="Items"/>
						<Text text="{advanceRequestDetailModel>/Code} - {advanceRequestDetailModel>/Name} (Transferred : {advanceRequestDetailModel>/CreateDate} )"/>
					</OverflowToolbar>
				</table:extension>
		                  
				<table:columns>
					<table:Column >
						<Text text="Account Code" />
						<table:template>
                        <Text text="{advanceRequestDetailModel>U_AccountCode} - "/>
						</table:template>
					</table:Column>

					<table:Column >
						<Text text="Item Name" />
						<table:template>
                        <Text text="{advanceRequestDetailModel>U_ItemCode}"/>
						</table:template>
					</table:Column>
					

					

					<table:Column >
						<Text text="Amount" />
						<table:template>

                        <ObjectNumber number="{
									parts: [
										{path:'advanceRequestDetailModel>U_Amount'}, 
										 'IDR',
										 'TwoWay'], 
									type:'sap.ui.model.type.Currency',
									formatOptions: {showMeasure: true}
								}" unit="IDR" />
							
						</table:template>
						 
					</table:Column>

				</table:columns>

					<table:footer>
						<FlexBox alignContent="End" justifyContent="End">
							<Label text="Total Advance Amount :   " />
							<ObjectNumber
							 
							 number="{
										parts: [
											{path:'advanceRequestDetailModel>/U_Amount'}, 
											'IDR',
											'TwoWay'], 
										type:'sap.ui.model.type.Currency',
										formatOptions: {showMeasure: true}
									}" unit="IDR" />
						</FlexBox>
  					</table:footer>

				
                </table:Table>
                
                </FlexBox>

				<FlexBox class="topMargin" >
				<table:Table id="advanceRealLineTableID"
					rows="{advanceRequestDetailModel>/REALIZATIONREQLINESCollection}"
					visibleRowCount="5"
				>
				
				<table:extension>
					<OverflowToolbar  class="sapMTBHeader-CTX">
						<Title text="Items"/>
						<ToolbarSpacer />
						<Button 
							icon="sap-icon://add"
							press=".onAddPress"
							type="Transparent"
							visible="{viewModel>/editable}"
						/>
					</OverflowToolbar>
				</table:extension>
                  
				<table:columns>

					<table:Column >
						<Text text="Account Code" />
						<table:template>
							<ComboBox width="100%"
								change="onAccountCodeChange"
								selectedKey="{advanceRequestDetailModel>U_AccountCode}"
								items="{
								path: 'accounts>/value/',
								templateShareable: false
								}"
							>
								<core:Item
									key="{accounts>Code}"
									text="{accounts>Code} - {accounts>Name}"
								/>

							</ComboBox>
						</table:template>
					</table:Column>

					

					<table:Column >
						<Text text="Item Name" />
						<table:template>
							<ComboBox width="100%"
								selectedKey="{advanceRequestDetailModel>U_ItemCode}"
								enabled="true"
							>

							</ComboBox>
						</table:template>
					</table:Column>

					<table:Column >
						<Text text="Description" />
						<table:template>
							<Input
								id="inputDescription"
								type="Text"
								placeholder="Description"
								editable="{viewModel>editable}"
								value="{advanceRequestDetailModel>U_Description}"
								/>
						</table:template>
					</table:Column>

					<table:Column width="8rem">
						<Text text="NPWP" />
						<table:template>
								<Select selectedKey="{advanceRequestDetailModel>U_NPWP}" 
								items="{
								path: 'viewModel>/NPWP',
								templateShareable: false
								}">
									<core:Item text="{viewModel>Name}" key="{viewModel>Name}"/>
								</Select>
						</table:template>
					</table:Column>

					<table:Column >
						<Text text="Amount" />
						<table:template>
							<Input
								id="inputNumber"
								placeholder="Enter number"
								editable="{viewModel>editable}"
								value="{
									parts: [
										{path:'advanceRequestDetailModel>U_Amount'}, 
										 'IDR',
										 'TwoWay'], 
									type:'sap.ui.model.type.Currency',
									formatOptions: {showMeasure: true}
								}"
								ariaLabelledBy="InputNumberLabel"
								change="onAmountChange"
								/>
						</table:template>
					</table:Column>

				</table:columns>

				
                </table:Table>
				</FlexBox>

				<form:SimpleForm id="SimpleFormChangeColumn_twoGroups234"
						editable="true"
                        layout="ColumnLayout"
                        columnsM="2"
                        columnsL="2"
                        columnsXL="2"
						class="topMargin" >
					<form:content>

					<Label id="_IDGenLabel101" text="Remarks" />
					<Text id="_IDGenText101" text="{advanceRequestDetailModel>/U_RealizationRemarks}" />

					</form:content>
				
				</form:SimpleForm>

				

                
			</VBox>
    </content>
	<footer  >
				<Toolbar>
					<ToolbarSpacer />
                   	<Button type="Emphasized" text="Submit" press="onSaveButtonClick" visible="{viewModel>/is_requestor}" />
					<Button type="Accept" text="Approve" press="onApproveButtonClick" visible="{viewModel>/is_approver}" />
					<Button type="Reject" text="Reject" press="onRejectButtonClick" visible="{viewModel>/is_approver}" />
					<Button type="Emphasized" text="Transfered" press="onTransferButtonClick" visible="{viewModel>/is_finance}" />
              
				</Toolbar>
		</footer>
  </Page>

  
</mvc:View>